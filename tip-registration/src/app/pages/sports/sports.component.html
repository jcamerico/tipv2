<div class="container-fluid mt-2">
    <h3 class="my-3">Registered sports</h3>

    <div class="d-flex flex-wrap">
    @for (sport of sports; track sport.sportInfo.type) {
        <div class="card m-2">
            <div class="card-header">
                <span class="fs-5">{{ sport.sportInfo.type }}</span>
                @if (sport.teamInfo) {
                    <span class="ms-2 badge" 
                    [class.text-bg-success]="sport.teamInfo.complete"
                    [class.text-bg-danger]="!sport.teamInfo.complete"
                    >
                        {{ sport.teamInfo.complete ? 'Team completed' : 'Team incomplete' }}
                    </span>
                    @if (sport.teamInfo.name) {
                        <span class="badge text-bg-info ms-1">{{ sport.teamInfo.name }} (Code: {{ sport.teamInfo.code }})</span>
                    }
                }
                @if (sport.level) {
                    <span class="badge text-bg-primary ms-1">{{ sport.level }}</span>
                }            
            </div>
            <div class="card-body d-flex flex-column">
                <!-- Description -->
                <div class="card-subtitle text-muted mb-2">
                    Organized by {{ sport.sportInfo.organizers.join(', ') }} ({{ sport.sportInfo.contacts.join(', ') }})
                    <br>
                    @for (date of sport.sportInfo.dates; track date) {
                        {{ date.startTime | date:'medium' }} - {{ date.endTime | date:'medium' }}
                        <br>
                    }
                </div>    
                <!-- Team -->            
                @if (sport.teamInfo && sport.teamInfo.members.length > 0) {
                    Team currently composed by:
                    <ul>
                        @for (member of sport.teamInfo.members; track member) {
                            <li>{{ member.lastName | uppercase }} {{ member.firstName }} {{member.teamCaptain ? '(C)' : '' }}</li>
                        }
                    </ul>
                }
                <!-- Events -->
                @if (sport.events && sport.events.length > 0) {
                    You are registered to the following events:
                    <ul>
                        @for (event of sport.events; track event) {
                            <li>{{ event }}</li>
                        }
                    </ul>
                }
                <div class="d-flex flex-row-reverse mt-auto">
                    <a type="button" class="btn btn-danger">Unregister</a>
                    <a type="button" class="btn btn-light me-2">Modify</a>
                </div>
            </div>    
        </div>
    } @empty {
        <p>You are not registered to any sports.</p>
    }
    </div>

    <div class="text-center my-3">
        <button type="button" (click)="addSport()" class="btn btn-primary btn-lg">Register new sport</button>
    </div>

</div>
